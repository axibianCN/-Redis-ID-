# 基于Redis的分布式ID生成器
## 分布式ID是什么？
1. 分布式ID是指：在当前的一些互联网架构中，服务器往往是多台物理机器组成的集群。当他们对外提供服务时，例如订单服务，不同的机器如何保证生成的订单ID不同？这就是分布式ID的一个典型应用场景，保证在不同机器下，生成的ID也不一致。
2. 主流算法：雪花算法SnowFlake算法
3. 雪花算法原理：一个64位的ID，0位为符号位默认为0，1～41位为时间戳位，一般是当前时间与某个初始时间戳之间的差值，42～51位为机器位/数据中心位，52～63位为递增的序列号位。所以在同一毫秒下，同一机器下，最多可以产生2^12次方-1个不同的ID。
## 如何实现？
本项目是基于Redis去实现分布式ID的生成。其中，默认采用了雪花算法实现。机器位/数据中心位由物理机mac地址的部分位充当，递增的序列号位是保存在Redis当中，Redis本身具有单线程执行命令的特点，这样可以保证不同的机器取到不一样的序列号位。在序列号位达到最大值之后，重置为0。
## 环境
- JDK17
- Springboot环境参考pom.xml
- Maven为3.9.10版本
## 运行
1. 加载maven环境
2. 直接运行SpringBoot启动类
3. 访问localhost:8080/createOrderNo接口，会自动返回生成的分布式ID到前端网页。
## 优化方向
1.时间戳41位显得有一些多余，在实际场景中，大多数时候41位的前面若干位实际都是一样的，可以考虑压缩时间戳的位数。
2.在压缩时间戳位数后，可以根据实际的物理机情况配置机器位/数据中心的位数。
3.增加sequence的位数，可以提高单毫秒级别内能够生成的不一样的分布式ID的总数。
